extends ../../layout

block content
    .content-wrapper
        .row
            .col-lg-12.heading
                ul#crumb.breadcrumb
                    li
                        i.im-home
                        a(href="/admin") 首页
                        i.en-arrow-right7
                    li
                        i.im-user4
                        a(href="/admin/grade/list") 班级列表
                        i.en-arrow-right7
                    li
                        i.en-user-add
                        a(href="#") #{action}班级
        .outlet
            .row
                .col-lg-12
                    .panel.panel-default.toggle
                        .panel-heading
                            h3.panel-title #{action}班级
                        .panel-body
                            form.form-horizontal.group-border.hover-stripped(role="form",id="validate",method="post",action="/admin/grade/new",enctype="multipart/form-data")
                                .form-group
                                    if grade&&grade._id
                                        input(type="hidden",value=grade._id,name="id")
                                    label.col-lg-2.col-md-2.control-label 班级名称
                                    .col-lg-10.col-md-10
                                        input#name.form-control.required(type="text",placeholder="请输入班级名称...",value=grade.name,name="name")
                                .form-group
                                    label.col-lg-2.col-md-2.control-label 班级成员
                                    .col-lg-10.col-md-10
                                        table.table.table-bordered
                                            thead
                                                tr
                                                    th 用户
                                                    th 角色
                                            tbody
                                                each u in grade.users
                                                    tr
                                                        td #{u.name}
                                                        td #{u.role.name}
                                        a(href="#",data-toggle="modal",data-target="#modal1")#addGradeUsers.btn.btn-primary
                                            | 新增班级成员
                                .form-group
                                    label.col-lg-2.col-md-2.control-label 所在位置(选填)
                                    .col-lg-10.col-md-10
                                        input#position.form-control(type="text",name="position",placeholder="请输入详细地址 ...",value=grade.position)
                                .form-group
                                    .col-lg-1.col-md-1
                                        button.btn.btn-default.ml15(type="submit") 保存
                                    .col-lg-11.col-md-11
                                        include ../../includes/notification
    #modal1.modal.fade(role="dialog",tabindex="-1",aria-hidden="true")
        .modal-dialog
            .modal-content
                .modal-header
                    button.close(type="button",data-dismiss="modal",aria-hidden="true")
                        | &times;
                    h4#myModalLabel.modal-title
                        | 添加班级管理人员
                form.form-horizontal(role="form",method="post",action="/admin/grade/insertuser",enctype="multipart/form-data")
                    .modal-body
                        .form-group
                            if grade&&grade._id
                                input(type="hidden",value=grade._id,name="grade_id")
                            if sid
                                input(type="hidden",value=sid,name="sid")
                            label.col-lg-2.col-md-2.control-label 用户
                            .col-lg-10.col-md-10
                                select#user.form-control(name="user")
                                    each u in users
                                        option(value=u._id)
                                            | #{u.name}
                        .form-group
                            label.col-lg-2.col-md-2.control-label 角色
                            .col-lg-10.col-md-10
                                select#role.form-control(name="role")
                                    each r in roles
                                        option(value=r._id)
                                            | #{r.name}
                    .modal-footer
                        button.btn.btn-default(type="button",data-dismiss="modal")
                            | 关闭
                        button.btn.btn-primary(type="submit")
                            | 保存
block componentScript
    include ../../includes/formScript
block bottom
    script(src="/javascripts/app.js")
    script(src="/assets/js/pages/form-validation.js")
    script.
        setTimeout(function(){
            checkSideNav('班级管理');
        },0);

